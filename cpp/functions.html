
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>User-defined Functions &#8212; IanFang Course Note Hosting  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/nature.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="canonical" href="https://uwf-fang.github.io/cpp/functions.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Modular Development" href="modular.html" />
    <link rel="prev" title="Chapter 3 User-defined Functions" href="../course/cop3014/ch03.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="modular.html" title="Modular Development"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../course/cop3014/ch03.html" title="Chapter 3 User-defined Functions"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">IanFang Course Note Hosting  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../course/cop3014/index.html" >COP 3014 Algorithm and Program Design</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../course/cop3014/ch03.html" accesskey="U">Chapter 3 User-defined Functions</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">User-defined Functions</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="user-defined-functions">
<h1>User-defined Functions<a class="headerlink" href="#user-defined-functions" title="Permalink to this headline">¶</a></h1>
<section id="concepts">
<h2>Concepts<a class="headerlink" href="#concepts" title="Permalink to this headline">¶</a></h2>
<dl class="glossary simple">
<dt id="term-function-name">function name<a class="headerlink" href="#term-function-name" title="Permalink to this term">¶</a></dt><dd><p>The name to a function given by the user. Same naming convention as
variables. You cannot use a same name for a function and a variable either.</p>
</dd>
<dt id="term-parentheses">parentheses<a class="headerlink" href="#term-parentheses" title="Permalink to this term">¶</a></dt><dd><p>A pair of parentheses must be present to differentiate a function name from
a variable name.</p>
</dd>
<dt id="term-formal-parameters">formal parameters<a class="headerlink" href="#term-formal-parameters" title="Permalink to this term">¶</a></dt><dd><p>Sometimes referred as parameters. Are the names listed in the parentheses
in the function definition.</p>
</dd>
<dt id="term-actual-parameters">actual parameters<a class="headerlink" href="#term-actual-parameters" title="Permalink to this term">¶</a></dt><dd><p>Are the rvalues provided in the parentheses of the function call.</p>
</dd>
<dt id="term-function-declaration">function declaration<a class="headerlink" href="#term-function-declaration" title="Permalink to this term">¶</a></dt><dd><p>A specification of the return type, function name and parameter types. How
a function can be called and what you can expect from the call.</p>
</dd>
<dt id="term-function-definition">function definition<a class="headerlink" href="#term-function-definition" title="Permalink to this term">¶</a></dt><dd><p>The implementation of the function. How is the work done in a function.</p>
</dd>
</dl>
</section>
<section id="purpose">
<h2>Purpose<a class="headerlink" href="#purpose" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>readability</p>
<ul>
<li><p>shorter function body</p></li>
<li><p>unique name for a code block</p></li>
</ul>
</li>
<li><p>code reuse, write once, use many times</p></li>
<li><p>affect outside world</p>
<ul>
<li><p>return value</p></li>
<li><p>modify parameter (reference or pointer parameters)</p></li>
<li><p>input/output</p></li>
<li><p>modify global variables (AVOID!)</p></li>
</ul>
</li>
</ul>
</section>
<section id="syntax">
<h2>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>declaration</p>
<ul class="simple">
<li><p>optional but strongly recommended</p></li>
<li><p>may omit parameter names</p></li>
<li><p>default value for parameters</p></li>
<li><p>add documentation</p></li>
<li><p>call a function before its implementation (definition)</p></li>
<li><p>public function declarations</p>
<ul>
<li><p>functions to be used by other cpp files</p></li>
<li><p>prefer to put in the header</p></li>
</ul>
</li>
<li><p>private function declarations</p>
<ul>
<li><p>functions to be used only in the current cpp file</p></li>
<li><p>prefer to put in the cpp file</p></li>
</ul>
</li>
</ul>
</li>
<li><p>definition (implementation)</p>
<ul class="simple">
<li><p>prefer to put in the cpp file</p></li>
<li><p>must have parameter names</p></li>
<li><p>default values are ignored</p></li>
<li><p>must align to declaration</p></li>
</ul>
</li>
<li><p>call</p>
<ul class="simple">
<li><p>matching mechanism</p></li>
<li><p>parameter passing is like initialization</p>
<ul>
<li><p>type conversion will happen</p></li>
</ul>
</li>
</ul>
</li>
<li><p>example</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">std</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="cm">/**</span>
<span class="linenos"> 6</span><span class="cm">  * function to double a value</span>
<span class="linenos"> 7</span><span class="cm">  * myParam: the input value to be doubled</span>
<span class="linenos"> 8</span><span class="cm">  * return: a double value</span>
<span class="linenos"> 9</span><span class="cm">  * documentations should be above the declaration</span>
<span class="linenos">10</span><span class="cm">  */</span><span class="w"></span>
<span class="linenos">11</span><span class="c1">// int doubleValue(int = 10);  // default value, no name</span>
<span class="linenos">12</span><span class="kt">int</span><span class="w"> </span><span class="nf">doubleValue</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">myParam</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span><span class="w">  </span><span class="c1">// default value, with name</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="kt">int</span><span class="w"> </span><span class="nf">doubleValue</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">param1</span><span class="p">){</span><span class="w"> </span><span class="c1">// parameter name can even be different</span>
<span class="linenos">15</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">param1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="linenos">16</span><span class="p">}</span><span class="w"></span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="kt">int</span><span class="w"> </span><span class="nf">localFunc</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">19</span><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;This is local&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">20</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="linenos">21</span><span class="p">}</span><span class="w"></span>
<span class="linenos">22</span>
<span class="linenos">23</span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">24</span><span class="w">  </span><span class="c1">// function calls</span>
<span class="linenos">25</span><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;double_value() gives &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">doubleValue</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span><span class="w">  </span><span class="c1">// get 20</span>
<span class="linenos">26</span><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;double_value(5) gives &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">doubleValue</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span><span class="w"> </span><span class="c1">// get 10</span>
<span class="linenos">27</span>
<span class="linenos">28</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">EXIT_SUCCESS</span><span class="p">;</span><span class="w"></span>
<span class="linenos">29</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="scope">
<h2>Scope<a class="headerlink" href="#scope" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>The life span of an entity (variable, function, type, etc.)</p></li>
<li><p>local scope to a function: local variables and formal parameters</p>
<ul class="simple">
<li><p>NEVER return a local variable by reference or pointer!</p></li>
<li><p>NEVER return a local array (only pointer will be passed out, the array
content will not)! Return a dynamic array instead.</p></li>
</ul>
</li>
<li><p>Code block based scope</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">// example 1, out-of-scope access</span>
<span class="linenos"> 2</span><span class="c1">// for loop is a block even without {}</span>
<span class="linenos"> 3</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">size</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 4</span><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 5</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span><span class="w">  </span><span class="c1">// will fail because i is not declared here</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="c1">// example 2, shadowed name</span>
<span class="linenos"> 8</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 9</span><span class="p">{</span><span class="w"></span>
<span class="linenos">10</span><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w">  </span><span class="c1">// treated as another variable, valid in this block only</span>
<span class="linenos">11</span><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span><span class="w">  </span><span class="c1">// get 10, outside i is shadowed</span>
<span class="linenos">12</span><span class="p">}</span><span class="w"></span>
<span class="linenos">13</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span><span class="w">  </span><span class="c1">// get 100</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="c1">// returning an dynamic array</span>
<span class="linenos">16</span><span class="c1">// should be deleted after use</span>
<span class="linenos">17</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="nf">makeArray</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">18</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">[</span><span class="n">size</span><span class="p">];</span><span class="w"></span>
<span class="linenos">19</span><span class="p">}</span><span class="w"></span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="c1">// ---- Wrong ----</span>
<span class="linenos">22</span><span class="c1">// returning local array</span>
<span class="linenos">23</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="nf">makeArray</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">24</span><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">array</span><span class="p">[</span><span class="n">size</span><span class="p">];</span><span class="w"></span>
<span class="linenos">25</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">array</span><span class="p">;</span><span class="w"></span>
<span class="linenos">26</span><span class="p">}</span><span class="w"></span>
<span class="linenos">27</span>
<span class="linenos">28</span><span class="c1">// ---- Wrong ----</span>
<span class="linenos">29</span><span class="c1">// returning local variable by reference/pointer</span>
<span class="linenos">30</span><span class="n">string</span><span class="w"> </span><span class="o">*</span><span class="nf">func</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">31</span><span class="w">  </span><span class="n">string</span><span class="w"> </span><span class="n">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;abc&quot;</span><span class="p">;</span><span class="w"></span>
<span class="linenos">32</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="o">&amp;</span><span class="n">str</span><span class="p">;</span><span class="w">  </span><span class="c1">// memory address is passed out, str will be destroyed</span>
<span class="linenos">33</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="overloading">
<h2>Overloading<a class="headerlink" href="#overloading" title="Permalink to this headline">¶</a></h2>
<p>Same name but different parameters (type, order, number) so the function call
can match the correct function. Because the return type and formal parameter
names does not affect the function call, differences in return type and formal
parameter names will not be valid overloading.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">// ==== Function Overloading ====</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="c1">// given this function</span>
<span class="linenos"> 4</span><span class="kt">int</span><span class="w"> </span><span class="nf">func1</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">name</span><span class="p">);</span><span class="w">  </span><span class="c1">// func1(3);</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="c1">// ---- Correct ----</span>
<span class="linenos"> 7</span><span class="kt">int</span><span class="w"> </span><span class="nf">func1</span><span class="p">(</span><span class="kt">double</span><span class="p">);</span><span class="w">  </span><span class="c1">// func1(3.0);</span>
<span class="linenos"> 8</span><span class="kt">int</span><span class="w"> </span><span class="nf">func1</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">);</span><span class="w">  </span><span class="c1">// func1(3, 3);</span>
<span class="linenos"> 9</span><span class="kt">int</span><span class="w"> </span><span class="nf">func1</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="p">);</span><span class="w">  </span><span class="c1">// func1(3, 3,0);</span>
<span class="linenos">10</span><span class="kt">int</span><span class="w"> </span><span class="nf">func1</span><span class="p">(</span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">);</span><span class="w">  </span><span class="c1">// func1(3.0, 3);</span>
<span class="linenos">11</span><span class="kt">int</span><span class="w"> </span><span class="nf">func1</span><span class="p">(</span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="p">);</span><span class="w">  </span><span class="c1">// func1(3.0, 3.0);</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="c1">// ---- Wrong ----</span>
<span class="linenos">14</span><span class="kt">double</span><span class="w"> </span><span class="nf">func1</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span><span class="w">  </span><span class="c1">// return type differs, also matches func1(3); call</span>
<span class="linenos">15</span><span class="kt">int</span><span class="w"> </span><span class="nf">func1</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">name1</span><span class="p">);</span><span class="w">  </span><span class="c1">// parameter names differ, also matches func1(3); call</span>
</pre></div>
</div>
</section>
<section id="function-call-matching">
<h2>Function call matching<a class="headerlink" href="#function-call-matching" title="Permalink to this headline">¶</a></h2>
<p>Function name overloading, default value, and implicit type conversion will all
affect function call matching. Any ambiguous function call will cause an syntax
error. Calls that need type conversion will not conflict with calls that do not
need conversion.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">// both do not need type conversion.</span>
<span class="linenos"> 2</span><span class="c1">// func1(1); call is ambiguous with</span>
<span class="linenos"> 3</span><span class="kt">void</span><span class="w"> </span><span class="nf">func1</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 4</span><span class="kt">void</span><span class="w"> </span><span class="nf">func1</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="c1">// both need type conversion</span>
<span class="linenos"> 7</span><span class="c1">// func2(2, 3); call is ambiguous with</span>
<span class="linenos"> 8</span><span class="kt">void</span><span class="w"> </span><span class="nf">func2</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 9</span><span class="kt">void</span><span class="w"> </span><span class="nf">func2</span><span class="p">(</span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">);</span><span class="w"></span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="c1">// first do not need type conversion</span>
<span class="linenos">12</span><span class="c1">// second need type conversion</span>
<span class="linenos">13</span><span class="c1">// func2(2, 3.0); call is fine with</span>
<span class="linenos">14</span><span class="kt">void</span><span class="w"> </span><span class="nf">func2</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="p">);</span><span class="w"></span>
<span class="linenos">15</span><span class="kt">void</span><span class="w"> </span><span class="nf">func2</span><span class="p">(</span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="pass-by-reference">
<h2>Pass by reference<a class="headerlink" href="#pass-by-reference" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>formal parameter vs actual parameter</p></li>
<li><p>allow modifications of the actual parameters</p></li>
<li><p>avoid duplication of the value (reduce overhead when the value is huge)</p></li>
</ul>
<section id="pass-by-ref-vs-pass-by-pointer">
<h3>Pass-by-ref vs Pass-by-pointer<a class="headerlink" href="#pass-by-ref-vs-pass-by-pointer" title="Permalink to this headline">¶</a></h3>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">// swap pointer version</span>
<span class="linenos"> 2</span><span class="c1">// called like swap(&amp;a, &amp;b);</span>
<span class="linenos"> 3</span><span class="kt">void</span><span class="w"> </span><span class="nf">swap</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">ptr1</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">ptr2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 4</span><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">ptr1</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 5</span><span class="w">  </span><span class="o">*</span><span class="n">ptr1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">ptr2</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 6</span><span class="w">  </span><span class="o">*</span><span class="n">ptr2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tmp</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 7</span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="c1">// swap ref version</span>
<span class="linenos">10</span><span class="c1">// cleaner syntax</span>
<span class="linenos">11</span><span class="c1">// called like swap(a, b);</span>
<span class="linenos">12</span><span class="kt">void</span><span class="w"> </span><span class="nf">swap</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">ref1</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">ref2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">13</span><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ref1</span><span class="p">;</span><span class="w"></span>
<span class="linenos">14</span><span class="w">  </span><span class="n">ref1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ref2</span><span class="p">;</span><span class="w"></span>
<span class="linenos">15</span><span class="w">  </span><span class="n">ref2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tmp</span><span class="p">;</span><span class="w"></span>
<span class="linenos">16</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>
<section id="returning-a-reference">
<h2>Returning a Reference<a class="headerlink" href="#returning-a-reference" title="Permalink to this headline">¶</a></h2>
<p>Returning a reference allows a function call to be used as a lvalue.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">class</span><span class="w"> </span><span class="nc">MyArr</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 2</span><span class="w"> </span><span class="k">private</span><span class="o">:</span><span class="w"></span>
<span class="linenos"> 3</span><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">arr</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 4</span><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 5</span><span class="w"> </span><span class="k">public</span><span class="o">:</span><span class="w"></span>
<span class="linenos"> 6</span><span class="w">  </span><span class="n">MyArr</span><span class="p">();</span><span class="w"></span>
<span class="linenos"> 7</span><span class="w">  </span><span class="n">MyArr</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 8</span><span class="w">  </span><span class="o">~</span><span class="n">MyArr</span><span class="p">();</span><span class="w"></span>
<span class="linenos"> 9</span><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="o">&amp;</span><span class="nf">at</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">);</span><span class="w"></span>
<span class="linenos">10</span><span class="p">};</span><span class="w"></span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="kt">int</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="nf">MyArr::at</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">13</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">];</span><span class="w">  </span><span class="c1">// the reference to arr[i] is passed out</span>
<span class="linenos">14</span><span class="p">}</span><span class="w"></span>
<span class="linenos">15</span>
<span class="linenos">16</span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">17</span><span class="w">  </span><span class="c1">// declare and initialize MyArr myArr1;</span>
<span class="linenos">18</span><span class="w">  </span><span class="n">myArr1</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w">  </span><span class="c1">// you can assign a value to a function call now</span>
<span class="linenos">19</span><span class="w">                      </span><span class="c1">// because myArr1.at() is an alias of myArr1.arr[i]</span>
<span class="linenos">20</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="passing-arrays-around">
<span id="pass-array"></span><h2>Passing arrays around<a class="headerlink" href="#passing-arrays-around" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>pass an array is passing a pointer by value (memory address)</p></li>
<li><p>only the first part (pointer part) is passed, data part stays</p></li>
<li><p>as parameter</p></li>
<li><p>as returned value</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">// ==== Array parameter ====</span>
<span class="linenos"> 2</span><span class="c1">// ---- Correct ----</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1">// ignore the size</span>
<span class="linenos"> 5</span><span class="kt">double</span><span class="w"> </span><span class="nf">average</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">arr</span><span class="p">[],</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 6</span><span class="kt">double</span><span class="w"> </span><span class="nf">average</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="o">*</span><span class="n">arr</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="c1">// ---- Wrong ----</span>
<span class="linenos"> 9</span><span class="kt">double</span><span class="w"> </span><span class="nf">average</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">arr</span><span class="p">[</span><span class="n">size</span><span class="p">],</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="p">);</span><span class="w">  </span><span class="c1">// not compile</span>
<span class="linenos">10</span><span class="kt">double</span><span class="w"> </span><span class="nf">average</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">arr</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="p">);</span><span class="w">  </span><span class="c1">// compile but 3 is ignored</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="c1">// ---- to call ----</span>
<span class="linenos">13</span><span class="kt">double</span><span class="w"> </span><span class="n">arr1</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0</span><span class="p">,</span><span class="w"> </span><span class="mf">3.0</span><span class="p">};</span><span class="w"></span>
<span class="linenos">14</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">average</span><span class="p">(</span><span class="n">arr1</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">15</span><span class="c1">// cout &lt;&lt; average(arr1[], 3) &lt;&lt; endl;  // wrong!</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="c1">// ==== Array as returned value ====</span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="c1">// ---- Correct ----</span>
<span class="linenos">20</span><span class="c1">// return a dynamic array</span>
<span class="linenos">21</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="nf">makeSequence</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">22</span><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">sequence</span><span class="p">;</span><span class="w"></span>
<span class="linenos">23</span><span class="w">  </span><span class="n">sequence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">[</span><span class="n">size</span><span class="p">];</span><span class="w"></span>
<span class="linenos">24</span><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">size</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"></span>
<span class="linenos">25</span><span class="w">    </span><span class="n">sequence</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="linenos">26</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">sequence</span><span class="p">;</span><span class="w"></span>
<span class="linenos">27</span><span class="p">}</span><span class="w"></span>
<span class="linenos">28</span>
<span class="linenos">29</span><span class="c1">// ---- Wrong ----</span>
<span class="linenos">30</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="nf">makeSequence</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">31</span><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">sequence</span><span class="p">[</span><span class="n">size</span><span class="p">];</span><span class="w"></span>
<span class="linenos">32</span><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">size</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"></span>
<span class="linenos">33</span><span class="w">    </span><span class="n">sequence</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="linenos">34</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">sequence</span><span class="p">;</span><span class="w"></span>
<span class="linenos">35</span><span class="p">}</span><span class="w"></span>
<span class="linenos">36</span>
<span class="linenos">37</span><span class="c1">// ---- to call ----</span>
<span class="linenos">38</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">seq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">makeSequence</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span><span class="w"></span>
<span class="linenos">39</span><span class="k">delete</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="n">seq</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">User-defined Functions</a><ul>
<li><a class="reference internal" href="#concepts">Concepts</a></li>
<li><a class="reference internal" href="#purpose">Purpose</a></li>
<li><a class="reference internal" href="#syntax">Syntax</a></li>
<li><a class="reference internal" href="#scope">Scope</a></li>
<li><a class="reference internal" href="#overloading">Overloading</a></li>
<li><a class="reference internal" href="#function-call-matching">Function call matching</a></li>
<li><a class="reference internal" href="#pass-by-reference">Pass by reference</a><ul>
<li><a class="reference internal" href="#pass-by-ref-vs-pass-by-pointer">Pass-by-ref vs Pass-by-pointer</a></li>
</ul>
</li>
<li><a class="reference internal" href="#returning-a-reference">Returning a Reference</a></li>
<li><a class="reference internal" href="#passing-arrays-around">Passing arrays around</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="../course/cop3014/ch03.html"
                          title="previous chapter">Chapter 3 User-defined Functions</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="modular.html"
                          title="next chapter">Modular Development</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/cpp/functions.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="modular.html" title="Modular Development"
             >next</a> |</li>
        <li class="right" >
          <a href="../course/cop3014/ch03.html" title="Chapter 3 User-defined Functions"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">IanFang Course Note Hosting  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../course/cop3014/index.html" >COP 3014 Algorithm and Program Design</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../course/cop3014/ch03.html" >Chapter 3 User-defined Functions</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">User-defined Functions</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, Ian Fang.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
    </div>
  </body>
</html>