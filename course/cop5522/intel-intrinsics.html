<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Intel SIMD Intrinsics &#8212; IanFang Course Note Hosting  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/nature.css?v=279e0f84" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=fa3f9a06" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="canonical" href="https://uwf-fang.github.io/course/cop5522/intel-intrinsics.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Profiling" href="profiling.html" />
    <link rel="prev" title="Module 2: Parallel Hardware and Software" href="m02.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="profiling.html" title="Profiling"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="m02.html" title="Module 2: Parallel Hardware and Software"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">IanFang Course Note Hosting  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >COP 5522 Parallel and Distributed Programming</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="m02.html" accesskey="U">Module 2: Parallel Hardware and Software</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Intel SIMD Intrinsics</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="intel-simd-intrinsics">
<h1>Intel SIMD Intrinsics<a class="headerlink" href="#intel-simd-intrinsics" title="Link to this heading">¶</a></h1>
<section id="simd-intrinsics">
<h2>SIMD Intrinsics<a class="headerlink" href="#simd-intrinsics" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>SIMD: Single Instruction, Multiple Data</p></li>
<li><p>Intrinsics: low-level, compiler-specific instructions that allow programmers
to leverage SIMD capabilities without writing assembly code. They provide a
higher-level interface for SIMD programming.</p></li>
<li><p>Motivation:</p>
<ul>
<li><p>Critical for performance optimization in certain applications</p></li>
<li><p>Harness the power of modern CPUs</p></li>
</ul>
</li>
<li><p>Characteristics:</p>
<ul>
<li><p>Hardware-specific</p></li>
<li><p>Compiler-specific</p></li>
</ul>
</li>
</ul>
</section>
<section id="intel-intrinsics">
<h2>Intel Intrinsics<a class="headerlink" href="#intel-intrinsics" title="Link to this heading">¶</a></h2>
<section id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Only available on Intel processors</p></li>
<li><p>Available in C/C++ and Fortran</p></li>
<li><p>Evolution</p>
<ul>
<li><p>Multimedia Extensions (MMX)</p></li>
<li><p>Streaming SIMD Extensions (SSE)</p></li>
<li><p>Advanced Vector Extensions (AVX)</p></li>
</ul>
</li>
<li><p>Operations</p>
<ul>
<li><p>Arithmetic</p></li>
<li><p>Logical</p></li>
<li><p>Data manipulation</p></li>
<li><p>Conversion</p></li>
<li><p>Shuffle</p></li>
<li><p>…</p></li>
</ul>
</li>
</ul>
</section>
<section id="sse4-intrinsics-in-c-language">
<h3>SSE4 Intrinsics in C language<a class="headerlink" href="#sse4-intrinsics-in-c-language" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Environment setup</p>
<ul>
<li><p>Compiler: gcc</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">-march=native</span></code> flag on a computer with intel CPU</p></li>
</ul>
</li>
<li><p>Hardware: Intel CPUs</p></li>
</ul>
</li>
<li><p>Include header file</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;immintrin.h&gt;</span></code></p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="sse4-example">
<h2>SSE4 Example<a class="headerlink" href="#sse4-example" title="Link to this heading">¶</a></h2>
<p>Matrix multiplication of a 4x4 matrix by a size-4 vector using SSE4 intrinsics
is a fundamental operation. For larger matrices, this example serves as a
building block for block-wise matrix multiplication, where the multiplication
is efficiently computed in smaller chunks. This approach enhances computational
efficiency and scalability when dealing with matrices of larger dimensions.</p>
<p><a class="reference external" href="https://github.com/uwf-fang/cop5522-examples/blob/main/m02/intel-simd-example.c">Link to code example</a></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">__m128</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">__m128</span></code> type is used to represent a 128-bit register that can hold 4
float numbers. The number of variables you can declare of this type is
limited by the number of registers available on the CPU.</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">_mm_loadu_ps</span></code> intrinsic</p>
<p>This intrinsic loads 4 float numbers from an unaligned memory address into a
<code class="docutils literal notranslate"><span class="pre">__m128</span></code> register. The <code class="docutils literal notranslate"><span class="pre">_mm_load_ps</span></code> intrinsic can be used to load 4
float numbers from an aligned memory address.</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">_mm_storeu_ps</span></code> intrinsic</p>
<p>This intrinsic stores 4 float numbers from a <code class="docutils literal notranslate"><span class="pre">__m128</span></code> register into an
unaligned memory address. The <code class="docutils literal notranslate"><span class="pre">_mm_store_ps</span></code> intrinsic can be used to store
4 float numbers from a <code class="docutils literal notranslate"><span class="pre">__m128</span></code> register into an aligned memory address.</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">_mm_add_ps</span></code> intrinsic</p>
<p>This intrinsic adds two <code class="docutils literal notranslate"><span class="pre">__m128</span></code> registers element-wise and returns the
result in a <code class="docutils literal notranslate"><span class="pre">__m128</span></code> register.</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">_mm_hadd_ps</span></code> intrinsic</p>
<p>This intrinsic adds two <code class="docutils literal notranslate"><span class="pre">__m128</span></code> registers horizontally and returns the
result in a <code class="docutils literal notranslate"><span class="pre">__m128</span></code> register. This horizontal addition adds the
neighboring two elements from the two registers to create a new register. The
first two elements of the result register are the sums from the first
register, and the last two elements of the result register are the sums from
the second register.</p>
<img alt="Demonstration on horizontal addition" src="../../_images/mm-hadd.png" />
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">_mm_mul_ps</span></code> intrinsic</p>
<p>This intrinsic multiplies two <code class="docutils literal notranslate"><span class="pre">__m128</span></code> registers element-wise and returns
the result in a <code class="docutils literal notranslate"><span class="pre">__m128</span></code> register.</p>
</li>
<li><p>All intrinsics used in the example are the unaligned versions. The aligned
versions are faster but require the memory addresses to be aligned to 16
bytes.</p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Intel SIMD Intrinsics</a><ul>
<li><a class="reference internal" href="#simd-intrinsics">SIMD Intrinsics</a></li>
<li><a class="reference internal" href="#intel-intrinsics">Intel Intrinsics</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#sse4-intrinsics-in-c-language">SSE4 Intrinsics in C language</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sse4-example">SSE4 Example</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="m02.html"
                          title="previous chapter">Module 2: Parallel Hardware and Software</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="profiling.html"
                          title="next chapter">Profiling</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/course/cop5522/intel-intrinsics.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="profiling.html" title="Profiling"
             >next</a> |</li>
        <li class="right" >
          <a href="m02.html" title="Module 2: Parallel Hardware and Software"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">IanFang Course Note Hosting  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >COP 5522 Parallel and Distributed Programming</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="m02.html" >Module 2: Parallel Hardware and Software</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Intel SIMD Intrinsics</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2021-2024, Ian Fang.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    </div>
  </body>
</html>