
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Testing in C++ &#8212; IanFang docs  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/nature.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="canonical" href="https://uwf-fang.github.io/cpp/testing.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Templates in C++" href="templates.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="templates.html" title="Templates in C++"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">IanFang docs  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../course/3530_index.html" >COP 3530 Data Structure and Algorithm Design</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../course/3530_topics.html" accesskey="U">Programming Topics</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Testing in C++</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="testing-in-c">
<h1>Testing in C++<a class="headerlink" href="#testing-in-c" title="Permalink to this headline">¶</a></h1>
<p>As the size and complexity of a software project scales, manual testing and
debugging become less and less effective. A more systematic testing method is
desirable.</p>
<p>The modular development of large projects breaks codes into smaller modules and
units such as functions, and classes. Within in this context, Unit Testing and
Integration Testing are extremely effective. Both of them are designed to be
automated with the help of testing frameworks. It is a huge boost to the quality
of the produced codes.</p>
<dl class="glossary simple">
<dt id="term-Unit-test">Unit test<a class="headerlink" href="#term-Unit-test" title="Permalink to this term">¶</a></dt><dd><p>It is a type of testing strategy to test software units individually in
isolation. To ensure <em>isolation</em>, techniques like mocking, stubbing, and
faking are introduced.</p>
</dd>
<dt id="term-Integration-test">Integration test<a class="headerlink" href="#term-Integration-test" title="Permalink to this term">¶</a></dt><dd><p>It is a type of testing strategy to test how a group of units works
together. Isolation can also be reinforced, similar to unit testing.</p>
</dd>
<dt id="term-Acceptance-test">Acceptance test<a class="headerlink" href="#term-Acceptance-test" title="Permalink to this term">¶</a></dt><dd><p>It is a final integration test that runs the whole software system all
together.</p>
</dd>
<dt id="term-Testing-framework">Testing framework<a class="headerlink" href="#term-Testing-framework" title="Permalink to this term">¶</a></dt><dd><p>A library/software to facilitate the testing process.</p>
</dd>
</dl>
<section id="to-beginners">
<h2>To Beginners<a class="headerlink" href="#to-beginners" title="Permalink to this headline">¶</a></h2>
<p>As a beginner taking entry-level courses, you should learn testing as soon as
possible to build a correct workflow on project. You can start writing tests by
simply add some assertion statements or even just some <code class="docutils literal notranslate"><span class="pre">cout</span></code> and <code class="docutils literal notranslate"><span class="pre">if</span></code>
statements to check whether your function or class is doing its job as expected.
These codes can be kept in separate cpp files with its own main function or as
functions in your driver file, such as main.cpp. The <code class="docutils literal notranslate"><span class="pre">assert</span></code> statement can also be used to check if a condition is as expected.</p>
<p>For example, assume that we have two classes <code class="docutils literal notranslate"><span class="pre">StoreItem</span></code> and <code class="docutils literal notranslate"><span class="pre">Store</span></code> to
test. A test driver may look like this:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">test-driver.cpp</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="linenos"> 2</span><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">std</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;store.hpp&quot;</span><span class="cp"></span>
<span class="linenos"> 5</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;store_item.hpp&quot;</span><span class="cp"></span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="kt">void</span><span class="w"> </span><span class="nf">test_store_item</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 8</span><span class="w">  </span><span class="n">StoreItem</span><span class="w"> </span><span class="n">item1</span><span class="p">(</span><span class="s">&quot;Apple&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 9</span><span class="w">  </span><span class="n">item1</span><span class="p">.</span><span class="n">print</span><span class="p">();</span><span class="w"></span>
<span class="linenos">10</span><span class="w">  </span><span class="n">StoreItem</span><span class="w"> </span><span class="n">item2</span><span class="p">(</span><span class="s">&quot;apple&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">11</span><span class="w">  </span><span class="n">item2</span><span class="p">.</span><span class="n">print</span><span class="p">();</span><span class="w"></span>
<span class="linenos">12</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">item1</span><span class="p">.</span><span class="n">equals</span><span class="p">(</span><span class="n">item2</span><span class="p">))</span><span class="w"></span>
<span class="linenos">13</span><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;They are equal!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
<span class="linenos">14</span><span class="w">  </span><span class="k">else</span><span class="w"></span>
<span class="linenos">15</span><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;They are not equal!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
<span class="linenos">16</span><span class="p">}</span><span class="w"></span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="kt">void</span><span class="w"> </span><span class="nf">test_store</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">19</span><span class="w">  </span><span class="n">Store</span><span class="w"> </span><span class="n">myStore</span><span class="p">(</span><span class="s">&quot;Test Store&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">20</span><span class="w">  </span><span class="n">myStore</span><span class="p">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">StoreItem</span><span class="p">(</span><span class="s">&quot;Apple&quot;</span><span class="p">));</span><span class="w"></span>
<span class="linenos">21</span><span class="w">  </span><span class="n">myStore</span><span class="p">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">StoreItem</span><span class="p">(</span><span class="s">&quot;Banana&quot;</span><span class="p">));</span><span class="w"></span>
<span class="linenos">22</span>
<span class="linenos">23</span><span class="w">  </span><span class="n">myStore</span><span class="p">.</span><span class="n">print</span><span class="p">();</span><span class="w"></span>
<span class="linenos">24</span><span class="p">}</span><span class="w"></span>
<span class="linenos">25</span>
<span class="linenos">26</span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"></span>
<span class="linenos">27</span><span class="p">{</span><span class="w"></span>
<span class="linenos">28</span><span class="w">  </span><span class="n">test_store_item</span><span class="p">();</span><span class="w"></span>
<span class="linenos">29</span><span class="w">  </span><span class="c1">// test_store();</span>
<span class="linenos">30</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="linenos">31</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</section>
<section id="testing-frameworks">
<h2>Testing Frameworks<a class="headerlink" href="#testing-frameworks" title="Permalink to this headline">¶</a></h2>
<p>Choosing a good testing framework is more effective in terms of easier test writing
and creation, better test organization, and better test result presentations. We
choose the Catch2 framework to write tests in some projects. It is simple but feature-rich. The syntax to write tests are simple:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;catch.hpp&quot;</span><span class="cp"></span>

<span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">Factorial</span><span class="p">(</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nl">number</span> <span class="p">:</span><span class="w"> </span><span class="n">Factorial</span><span class="p">(</span><span class="n">number</span><span class="mi">-1</span><span class="p">)</span><span class="o">*</span><span class="n">number</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="n">TEST_CASE</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Factorials are computed&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;[factorial]&quot;</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">REQUIRE</span><span class="p">(</span><span class="w"> </span><span class="n">Factorial</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">REQUIRE</span><span class="p">(</span><span class="w"> </span><span class="n">Factorial</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">REQUIRE</span><span class="p">(</span><span class="w"> </span><span class="n">Factorial</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">REQUIRE</span><span class="p">(</span><span class="w"> </span><span class="n">Factorial</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">REQUIRE</span><span class="p">(</span><span class="w"> </span><span class="n">Factorial</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">3628800</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">TEST_CASE</span></code> macro defines a test case with a description and a tag string.
The <code class="docutils literal notranslate"><span class="pre">REQUIRE</span></code> macro will check the condition in the parenthesis. It will pass
if the condition is true.</p>
<p>A comprehensive <a class="reference external" href="https://catch2.docsforge.com/v2.13.2/tutorial/">tutorial</a> is available.</p>
</section>
<section id="testability">
<h2>Testability<a class="headerlink" href="#testability" title="Permalink to this headline">¶</a></h2>
<p>Some codes are easier to test than others. In most of the cases, a more testable
code base has better quality than something not very testable. Testable codes
are usually well-designed.</p>
<p>There are many principles in how to write testable codes. Here are some simple
rules we can follow:</p>
<ol class="arabic simple">
<li><p>keep the size of each unit small</p></li>
<li><p>keep each unit coherent</p></li>
<li><p>keep each unit focusing on one responsibility</p></li>
<li><p>keep the units decoupled (each unit <em>knows</em> minimal numbers of other units)</p></li>
<li><p>keep units deterministic</p></li>
<li><p>keep most units side effect free if possible</p></li>
</ol>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Testing in C++</a><ul>
<li><a class="reference internal" href="#to-beginners">To Beginners</a></li>
<li><a class="reference internal" href="#testing-frameworks">Testing Frameworks</a></li>
<li><a class="reference internal" href="#testability">Testability</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="templates.html"
                        title="previous chapter">Templates in C++</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/cpp/testing.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="templates.html" title="Templates in C++"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">IanFang docs  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../course/3530_index.html" >COP 3530 Data Structure and Algorithm Design</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../course/3530_topics.html" >Programming Topics</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Testing in C++</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2021, Ian Fang.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.2.0.
    </div>
  </body>
</html>